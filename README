# Execution instructions

# 1) SETUP
# Create the following links on the root of the directory of the package (where
# this README file is). Make sure to select your *own* local versions of torch
# and gridtk to avoid surprises like nightly build erases and the such.

ln -s /idiap/home/aanjos/work/torch/main torch
ln -s /idiap/home/aanjos/work/gridtk gridtk

# 2) CONFIGURATION
# Tune configuration at: config/gmm_replay.py

vim config/gmm_replay.py

# 3) FEATURE EXTRACTION
# Run replay_dct_features.py to create the features. This step only need the
# original database videos as input.

./shell.py -- script/replay_dct_features.py --config=config/gmm_replay.py

# 4) UBM TRAINING
# Run gmm_ubm_replay.py to create the UBM from selected features.
# Note: if you use ~1k files, it will take ~3 hours to complete and there is
# no way to split it on the grid.
# This step requires all features for the training set/enrollment are
# calculated.

./shell.py -- script/gmm_ubm_replay.py --config=config/gmm_replay.py

# 5) UBM STATISTICS GENERATION
# Run gmm_stats_replay.py to create the background statistics for all
# datafiles so we can run score normalization later.
# This step requires that the UBM is calculated and all features are available.

./shell.py -- script/gmm_stats_replay.py --config=config/gmm_replay.py

# This will take a lot of time to go through all the videos in the replay
# database. You can optionally submit the command to the grid, if you are at
# Idiap, with the following:

./shell.py -- ./script/grid_gmmstats_replay.py --config=config/gmm_replay.py

# This command will spread the GMM UBM statistics calculation over 840
# processes that will run in about 5-10 minutes each. So, the whole job will
# take a few hours to complete - taking into consideration current settings
# for SGE at Idiap.

# 6) MODEL TRAINING
# Generate the models for all clients. Note: You can do this in parallel with
# step 5 above as it only depends on the input features pre-calculated at step
# 3.

./shell.py -- ./script/gmm_models_replay.py --config=config/gmm_replay.py

# If you think the above job is too slow, you also have a grid alternative:

./shell.py -- ./script/grid_gmmmodels_replay.py --config=config/gmm_replay.py

# 7) SCORING
# In this step you will score the videos (every N frames up to a certain frame
# number) against the generated client models. We do this exhaustively for both
# the test and development data. Command line execution goes like this:

./shell.py -- ./script/gmm_scores_replay.py --config=config/gmm_replay.py

# Linear scoring is fast, but you can also submit a client-based break-down of
# this problem like this:

./shell.py -- ./script/grid_gmmscores_replay.py --config=config/gmm_replay.py

--
07.November.2011
Andre Anjos
